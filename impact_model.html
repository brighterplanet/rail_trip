<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>impact_model.rb</title>
  <link rel="stylesheet" href="http://jashkenas.github.com/docco/resources/docco.css">
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1667526-20']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <style type="text/css">
    td.docs h1 {
      margin-top: 0;
    }
    @media print {
      .code pre {
        white-space: pre-wrap;
      }
      .code {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      .code .highlight {
        margin-left: 15px;
        margin-right: 15px;
      }
    }
  </style>
</head>

<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>impact_model.rb</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-1'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-1">&#182;</a>
        </div>
        <p>Copyright Â© 2010 Brighter Planet.
See LICENSE for details.
Contact Brighter Planet for dual-license arrangements.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-Rail_trip_carbon_model'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Rail_trip_carbon_model">&#182;</a>
        </div>
        <h1>Rail trip carbon model</h1>

<p>This model is used by <a href="http://brighterplanet.com">Brighter Planet</a>&rsquo;s carbon emission <a href="http://carbon.brighterplanet.com">web service</a> to estimate the <strong>greenhouse gas emissions of passenger rail travel</strong>.</p>

<h4>Calculations</h4>

<p>The final estimate is the result of the <strong>calculations</strong> detailed below. These calculations are performed in reverse order, starting with the last calculation listed and finishing with the emission calculation. Each calculation is named according to the <code>value</code> it returns.</p>

<h4>Timeframe and date</h4>

<p>The model estimates the emissions that occur during a particular <code>timeframe</code>. To do this it needs to know the trip&rsquo;s <code>date</code>. For example, if the <code>timeframe</code> is January 2010, a trip that occurred on January 11, 2010 will have emissions but a trip that occurred on Febraury 1, 2010 will not. If the user does not specify a <code>timeframe</code> it defaults to the current calendar year.</p>

<h4>Methods</h4>

<p>To accomodate varying client input, each calculation may have one or more <strong>methods</strong>. These are listed under each calculation in order from most to least preferred. Each method is named according to the <code>values</code> it requires (&lsquo;default&rsquo; methods do not require any values). Methods are ignored if any of the values they require are unvailable. Calculations are ignored if all of their methods are unavailable.</p>

<h4>Standard compliance</h4>

<p>Each method lists any established calculation standards with which it <strong>complies</strong>. When compliance with a standard is requested, all methods that do not comply with that standard are ignored. This means that any values a particular method requires will have been calculated using a compliant method or will be unavailable.</p>

<h4>Collaboration</h4>

<p>Contributions to this carbon model are actively encouraged and warmly welcomed. This library includes a comprehensive test suite to ensure that your changes do not cause regressions. All changes should include test coverage for new functionality. Please see <a href="https://github.com/brighterplanet/sniff#readme">sniff</a>, our emitter testing framework, for more information.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="k">module</span> <span class="nn">BrighterPlanet</span>
  <span class="k">module</span> <span class="nn">RailTrip</span>
    <span class="k">module</span> <span class="nn">ImpactModel</span>
      <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">included</span><span class="p">(</span><span class="n">base</span><span class="p">)</span>
        <span class="n">base</span><span class="o">.</span><span class="n">decide</span> <span class="ss">:impact</span><span class="p">,</span> <span class="ss">:with</span> <span class="o">=&gt;</span> <span class="ss">:characteristics</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Greenhosuse_gas_emission_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Greenhosuse_gas_emission_calculation">&#182;</a>
        </div>
        <h2>Greenhosuse gas emission calculation</h2>

<p>Returns the <code>greenhouse gas emission</code> estimate (<em>kg CO<sub>2</sub>e</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:carbon</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Greenhouse_gas_emission_from_distance,_co2_emission_factor,_date,_and_timeframe'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Greenhouse_gas_emission_from_distance,_co2_emission_factor,_date,_and_timeframe">&#182;</a>
        </div>
        <h3>Greenhouse gas emission from distance, co2 emission factor, date, and timeframe</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from distance, co2 emission factor, date, and timeframe&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:distance</span><span class="p">,</span> <span class="ss">:co2_emission_factor</span><span class="p">,</span> <span class="ss">:date</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-5'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-5">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="p">,</span> <span class="n">timeframe</span><span class="o">|</span>
                <span class="n">date</span> <span class="o">=</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:date</span><span class="o">].</span><span class="n">is_a?</span><span class="p">(</span><span class="no">Date</span><span class="p">)</span> <span class="p">?</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:date</span><span class="o">]</span> <span class="p">:</span> <span class="no">Date</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:date</span><span class="o">].</span><span class="n">to_s</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">timeframe</span><span class="o">.</span><span class="n">include?</span> <span class="n">date</span></pre></div>
      </td>
    </tr>
    <tr id='section-6'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-6">&#182;</a>
        </div>
        <p>Multiplies the <code>distance</code> (<em>km</em>) by the <code>co2 emission factor</code> (<em>kg CO<sub>2</sub></em> / passenger-km) to give <em>kg CO<sub>2</sub></em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:distance</span><span class="o">]</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:co2_emission_factor</span><span class="o">]</span>
                <span class="k">else</span></pre></div>
      </td>
    </tr>
    <tr id='section-7'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-7">&#182;</a>
        </div>
        <p>If the <code>date</code> does not fall within the <code>timeframe</code>, <code>greenhouse gas emission</code> is zero.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                  <span class="mi">0</span>
                <span class="k">end</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-CO2_emission_factor_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CO2_emission_factor_calculation">&#182;</a>
        </div>
        <h2>CO2 emission factor calculation</h2>

<p>Returns the trip&rsquo;s <code>co2 emission factor</code> (<em>kg CO<sub>2</sub>e / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:co2_emission_factor</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-CO2_emission_factor_from_distance_and_rail_company_rail_class_rail_traction'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CO2_emission_factor_from_distance_and_rail_company_rail_class_rail_traction">&#182;</a>
        </div>
        <h3>CO2 emission factor from distance and rail company rail class rail traction</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rail company rail traction rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:rail_company_traction_class</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-10'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-10">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-11'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-11">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/rail_company_traction_classes">rail company rail traction rail class</a> co2 emission factor (<em>kg CO<sub>2</sub></em> / passenger-km).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_company_traction_class</span><span class="o">].</span><span class="n">co2_emission_factor</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-CO2_emission_factor_from_rail_company_rail_traction'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CO2_emission_factor_from_rail_company_rail_traction">&#182;</a>
        </div>
        <h3>CO2 emission factor from rail company rail traction</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rail company rail traction&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:rail_company_traction</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-13'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-13">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-14'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-14">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/rail_company_tractions">rail company rail traction</a> co2 emission factor (<em>kg CO<sub>2</sub></em> / passenger-km).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_company_traction</span><span class="o">].</span><span class="n">co2_emission_factor</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-CO2_emission_factor_from_country_rail_traction_rail_class'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CO2_emission_factor_from_country_rail_traction_rail_class">&#182;</a>
        </div>
        <h3>CO2 emission factor from country rail traction rail class</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country rail traction rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country_rail_traction_class</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-16'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-16">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-17'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-17">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/country_rail_traction_classes">country rail traction rail class</a> co2 emission factor (<em>kg CO<sub>2</sub></em> / passenger-km).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country_rail_traction_class</span><span class="o">].</span><span class="n">co2_emission_factor</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-CO2_emission_factor_from_rail_company'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CO2_emission_factor_from_rail_company">&#182;</a>
        </div>
        <h3>CO2 emission factor from rail company</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rail company&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:rail_company</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-19'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-19">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-20'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-20">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/rail_companies">rail company</a> co2 emission factor (<em>kg CO<sub>2</sub></em> / passenger-km).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_company</span><span class="o">].</span><span class="n">co2_emission_factor</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-CO2_emission_factor_from_country_rail_class'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CO2_emission_factor_from_country_rail_class">&#182;</a>
        </div>
        <h3>CO2 emission factor from country rail class</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country_rail_class</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-22'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-22">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-23'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-23">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/country_rail_classes">country rail class</a> co2 emission factor (<em>kg CO<sub>2</sub></em> / passenger-km).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country_rail_class</span><span class="o">].</span><span class="n">co2_emission_factor</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-CO2_emission_factor_from_country_rail_traction'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CO2_emission_factor_from_country_rail_traction">&#182;</a>
        </div>
        <h3>CO2 emission factor from country rail traction</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country rail traction&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country_rail_traction</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-25'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-25">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-26'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-26">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/country_rail_tractions">country rail traction</a> co2 emission factor (<em>kg CO<sub>2</sub></em> / passenger-km).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country_rail_traction</span><span class="o">].</span><span class="n">co2_emission_factor</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-CO2_emission_factor_from_country'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CO2_emission_factor_from_country">&#182;</a>
        </div>
        <h3>CO2 emission factor from country</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-28'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-28">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-29'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-29">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/countries">country</a> co2 emission factor (<em>kg CO<sub>2</sub></em> / passenger-km).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">].</span><span class="n">rail_trip_co2_emission_factor</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-CO2_emission_factor_from_default'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-CO2_emission_factor_from_default">&#182;</a>
        </div>
        <h3>CO2 emission factor from default</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-31'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-31">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-32'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-32">&#182;</a>
        </div>
        <p>Looks up the global average rail trip co2 emission factor (<em>kg CO<sub>2</sub></em> / passenger-km).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">rail_trip_co2_emission_factor</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Diesel_consumption_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Diesel_consumption_calculation">&#182;</a>
        </div>
        <h2>Diesel consumption calculation</h2>

<p>Returns the trip&rsquo;s <code>diesel consumption</code> (<em>kWh / passenger</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:diesel_consumption</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Diesel_consumption_from_distance_and_diesel_intensity'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Diesel_consumption_from_distance_and_diesel_intensity">&#182;</a>
        </div>
        <h3>Diesel consumption from distance and diesel intensity</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from distance and diesel intensity&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:distance</span><span class="p">,</span> <span class="ss">:diesel_intensity</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-35'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-35">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-36'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-36">&#182;</a>
        </div>
        <p>Multiplies the <code>distance</code> (<em>km</em>) by the <code>diesel intensity</code> (<em>kWh / passenger-km</em>) to give <em>kWh</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:distance</span><span class="o">]</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:diesel_intensity</span><span class="o">]</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_consumption_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_consumption_calculation">&#182;</a>
        </div>
        <h2>Electricity consumption calculation</h2>

<p>Returns the trip&rsquo;s <code>electricity consumption</code> (<em>kWh / passenger</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:electricity_consumption</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_consumption_from_distance_and_electricity_intensity'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_consumption_from_distance_and_electricity_intensity">&#182;</a>
        </div>
        <h3>Electricity consumption from distance and electricity intensity</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from distance and electricity intensity&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:distance</span><span class="p">,</span> <span class="ss">:electricity_intensity</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-39'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-39">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-40'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-40">&#182;</a>
        </div>
        <p>Multiplies the <code>distance</code> (<em>km</em>) by the <code>electricity intensity</code> (<em>kWh / passenger-km</em>) to give <em>kWh</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:distance</span><span class="o">]</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:electricity_intensity</span><span class="o">]</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Diesel_intensity_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Diesel_intensity_calculation">&#182;</a>
        </div>
        <h2>Diesel intensity calculation</h2>

<p>Returns the trip&rsquo;s <code>diesel intensity</code> (<em>l / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:diesel_intensity</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Diesel_intensity_from_rail_company_rail_class_rail_traction'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Diesel_intensity_from_rail_company_rail_class_rail_traction">&#182;</a>
        </div>
        <h3>Diesel intensity from rail company rail class rail traction</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rail company rail traction rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:rail_company_traction_class</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-43'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-43">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-44'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-44">&#182;</a>
        </div>
        <p>Looks up the <code>rail company rail traction rail class</code> diesel intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_company_traction_class</span><span class="o">].</span><span class="n">diesel_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Diesel_intensity_from_rail_company_rail_traction'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Diesel_intensity_from_rail_company_rail_traction">&#182;</a>
        </div>
        <h3>Diesel intensity from rail company rail traction</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rail company rail traction&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:rail_company_traction</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-46'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-46">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-47'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-47">&#182;</a>
        </div>
        <p>Looks up the <code>rail company rail traction</code> diesel intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_company_traction</span><span class="o">].</span><span class="n">diesel_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Diesel_intensity_from_country_rail_traction_rail_class'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Diesel_intensity_from_country_rail_traction_rail_class">&#182;</a>
        </div>
        <h3>Diesel intensity from country rail traction rail class</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country rail traction rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country_rail_traction_class</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-49'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-49">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-50'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-50">&#182;</a>
        </div>
        <p>Looks up the <code>country rail traction rail class</code> diesel intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country_rail_traction_class</span><span class="o">].</span><span class="n">diesel_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Diesel_intensity_from_rail_company'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Diesel_intensity_from_rail_company">&#182;</a>
        </div>
        <h3>Diesel intensity from rail company</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rail company&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:rail_company</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-52'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-52">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-53'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-53">&#182;</a>
        </div>
        <p>Looks up the <code>rail company</code> diesel intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_company</span><span class="o">].</span><span class="n">diesel_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Diesel_intensity_from_country_rail_class'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Diesel_intensity_from_country_rail_class">&#182;</a>
        </div>
        <h3>Diesel intensity from country rail class</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country_rail_class</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-55'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-55">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-56'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-56">&#182;</a>
        </div>
        <p>Looks up the <code>country rail class</code> diesel intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country_rail_class</span><span class="o">].</span><span class="n">diesel_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Diesel_intensity_from_country_rail_traction'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Diesel_intensity_from_country_rail_traction">&#182;</a>
        </div>
        <h3>Diesel intensity from country rail traction</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country rail traction&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country_rail_traction</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-58'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-58">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-59'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-59">&#182;</a>
        </div>
        <p>Looks up the <code>country rail traction</code> diesel intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country_rail_traction</span><span class="o">].</span><span class="n">diesel_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Diesel_intensity_from_country'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Diesel_intensity_from_country">&#182;</a>
        </div>
        <h3>Diesel intensity from country</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-61'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-61">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-62'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-62">&#182;</a>
        </div>
        <p>Looks up the <code>country</code> rail trip diesel intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">].</span><span class="n">rail_trip_diesel_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Diesel_intensity_from_default'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Diesel_intensity_from_default">&#182;</a>
        </div>
        <h3>Diesel intensity from default</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-64'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-64">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-65'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-65">&#182;</a>
        </div>
        <p>Looks up the global average rail trip diesel intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">rail_trip_diesel_intensity</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_intensity_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_intensity_calculation">&#182;</a>
        </div>
        <h2>Electricity intensity calculation</h2>

<p>Returns the trip&rsquo;s <code>electricity intensity</code> (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:electricity_intensity</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_intensity_from_rail_company_rail_class_rail_traction'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_intensity_from_rail_company_rail_class_rail_traction">&#182;</a>
        </div>
        <h3>Electricity intensity from rail company rail class rail traction</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rail company rail traction rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:rail_company_traction_class</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-68'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-68">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-69'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-69">&#182;</a>
        </div>
        <p>Looks up the <code>rail company rail traction rail class</code> electricity intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_company_traction_class</span><span class="o">].</span><span class="n">electricity_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_intensity_from_rail_company_rail_traction'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_intensity_from_rail_company_rail_traction">&#182;</a>
        </div>
        <h3>Electricity intensity from rail company rail traction</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rail company rail traction&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:rail_company_traction</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-71'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-71">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-72'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-72">&#182;</a>
        </div>
        <p>Looks up the <code>rail company rail traction</code> electricity intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_company_traction</span><span class="o">].</span><span class="n">electricity_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_intensity_from_country_rail_traction_rail_class'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_intensity_from_country_rail_traction_rail_class">&#182;</a>
        </div>
        <h3>Electricity intensity from country rail traction rail class</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country rail traction rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country_rail_traction_class</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-74'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-74">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-75'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-75">&#182;</a>
        </div>
        <p>Looks up the <code>country rail traction rail class</code> electricity intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country_rail_traction_class</span><span class="o">].</span><span class="n">electricity_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_intensity_from_rail_company'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_intensity_from_rail_company">&#182;</a>
        </div>
        <h3>Electricity intensity from rail company</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rail company&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:rail_company</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-77'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-77">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-78'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-78">&#182;</a>
        </div>
        <p>Looks up the <code>rail company</code> electricity intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_company</span><span class="o">].</span><span class="n">electricity_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_intensity_from_country_rail_class'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_intensity_from_country_rail_class">&#182;</a>
        </div>
        <h3>Electricity intensity from country rail class</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country_rail_class</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-80'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-80">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-81'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-81">&#182;</a>
        </div>
        <p>Looks up the <code>country rail class</code> electricity intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country_rail_class</span><span class="o">].</span><span class="n">electricity_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_intensity_from_country_rail_traction'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_intensity_from_country_rail_traction">&#182;</a>
        </div>
        <h3>Electricity intensity from country rail traction</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country rail traction&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country_rail_traction</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-83'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-83">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-84'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-84">&#182;</a>
        </div>
        <p>Looks up the <code>country rail traction</code> electricity intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country_rail_traction</span><span class="o">].</span><span class="n">electricity_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_intensity_from_country'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_intensity_from_country">&#182;</a>
        </div>
        <h3>Electricity intensity from country</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-86'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-86">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-87'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-87">&#182;</a>
        </div>
        <p>Looks up the <code>country</code> rail trip electricity intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">].</span><span class="n">rail_trip_electricity_intensity</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Electricity_intensity_from_default'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Electricity_intensity_from_default">&#182;</a>
        </div>
        <h3>Electricity intensity from default</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-89'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-89">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-90'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-90">&#182;</a>
        </div>
        <p>Looks up the global average rail trip electricity intensity (<em>kWh / passenger-km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">rail_trip_electricity_intensity</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Distance_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Distance_calculation">&#182;</a>
        </div>
        <h2>Distance calculation</h2>

<p>Returns the trip&rsquo;s <code>distance</code> (<em>km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:distance</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Distance_from_client_input'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Distance_from_client_input">&#182;</a>
        </div>
        <h3>Distance from client input</h3>

<p><strong>Complies:</strong> All</p>

<p>Uses the client-input distance (<em>km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-Distance_from_origin_location_and_destination_location'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Distance_from_origin_location_and_destination_location">&#182;</a>
        </div>
        <h3>Distance from origin location and destination location</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from origin and destination locations&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:origin_location</span><span class="p">,</span> <span class="ss">:destination_location</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-94'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-94">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-95'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-95">&#182;</a>
        </div>
        <p>Uses the <a href="http://developer.mapquest.com/web/products/dev-services/directions-ws">Mapquest directions API</a> to calculate distance by road between the <code>origin location</code> and <code>destination location</code> in <em>km</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">mapquest</span> <span class="o">=</span> <span class="o">::</span><span class="no">MapQuestDirections</span><span class="o">.</span><span class="n">new</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:origin_location</span><span class="o">].</span><span class="n">ll</span><span class="p">,</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:destination_location</span><span class="o">].</span><span class="n">ll</span>
                <span class="n">mapquest</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">to_i</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="no">Nokogiri</span><span class="o">::</span><span class="no">XML</span><span class="p">(</span><span class="n">mapquest</span><span class="o">.</span><span class="n">xml</span><span class="p">)</span><span class="o">.</span><span class="n">css</span><span class="p">(</span><span class="s2">&quot;distance&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">to_f</span><span class="o">.</span><span class="n">miles</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="ss">:kilometres</span><span class="p">)</span> <span class="p">:</span> <span class="kp">nil</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Distance_from_duration_and_speed'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Distance_from_duration_and_speed">&#182;</a>
        </div>
        <h3>Distance from duration and speed</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from duration and speed&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:duration</span><span class="p">,</span> <span class="ss">:speed</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-97'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-97">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-98'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-98">&#182;</a>
        </div>
        <p>Multiplies the <code>duration</code> (<em>hours</em>) by the <code>speed</code> (<em>km / hour</em>) to give <em>km</em>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:duration</span><span class="o">]</span> <span class="o">/</span> <span class="mi">3600</span><span class="o">.</span><span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:speed</span><span class="o">]</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Distance_from_country_rail_class'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Distance_from_country_rail_class">&#182;</a>
        </div>
        <h3>Distance from country rail class</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:country_rail_class</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-100'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-100">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-101'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-101">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/country_rail_classes">country rail class</a> average trip <code>distance</code> (<em>km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country_rail_class</span><span class="o">].</span><span class="n">trip_distance</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Distance_from_country'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Distance_from_country">&#182;</a>
        </div>
        <h3>Distance from country</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-103'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-103">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-104'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-104">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/countries">country</a> average trip <code>distance</code> (<em>km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">].</span><span class="n">rail_trip_distance</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Distance_from_default'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Distance_from_default">&#182;</a>
        </div>
        <h3>Distance from default</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-106'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-106">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-107'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-107">&#182;</a>
        </div>
        <p>Looks up the global average trip <code>distance</code> (<em>km</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">rail_trip_distance</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Duration_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Duration_calculation">&#182;</a>
        </div>
        <h2>Duration calculation</h2>

<p>Returns the client-input <code>duration</code> (<em>hours</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Speed_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Speed_calculation">&#182;</a>
        </div>
        <h2>Speed calculation</h2>

<p>Returns the trip&rsquo;s average speed (<em>km / hr</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:speed</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Speed_from_country_rail_class'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Speed_from_country_rail_class">&#182;</a>
        </div>
        <h3>Speed from country rail class</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:country_rail_class</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-111'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-111">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-112'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-112">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/country_rail_classes">country rail class</a> average rail <code>speed</code> (<em>km / hr</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country_rail_class</span><span class="o">].</span><span class="n">speed</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Speed_from_country'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Speed_from_country">&#182;</a>
        </div>
        <h3>Speed from country</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:country</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-114'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-114">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-115'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-115">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/countries">country</a> average rail &lsquo;speed&rsquo; (<em>km / hr</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">].</span><span class="n">rail_speed</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Speed_from_default'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Speed_from_default">&#182;</a>
        </div>
        <h3>Speed from default</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-117'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-117">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-118'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-118">&#182;</a>
        </div>
        <p>Looks up the global average rail &lsquo;speed&rsquo; (<em>km / hr</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="no">Country</span><span class="o">.</span><span class="n">fallback</span><span class="o">.</span><span class="n">rail_speed</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Rail_company_rail_traction_rail_class_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Rail_company_rail_traction_rail_class_calculation">&#182;</a>
        </div>
        <h2>Rail company rail traction rail class calculation</h2>

<p>Returns the <code>rail company rail traction rail class</code>. This is a rail company-specific rail traction type and rail class (e.g. Amtrak diesel intercity).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:rail_company_traction_class</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Rail_company_rail_traction_rail_class_from_rail_company,_rail_traction,_and_rail_class'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Rail_company_rail_traction_rail_class_from_rail_company,_rail_traction,_and_rail_class">&#182;</a>
        </div>
        <h3>Rail company rail traction rail class from rail company, rail traction, and rail class</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rail company, rail traction, and rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:rail_company</span><span class="p">,</span> <span class="ss">:rail_traction</span><span class="p">,</span> <span class="ss">:rail_class</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-121'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-121">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-122'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-122">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/rail_company_traction_classes">rail company rail traction rail class</a> based on the <code>rail company</code> name, <code>rail traction</code> name, and <code>rail class</code> name.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="no">RailCompanyTractionClass</span><span class="o">.</span><span class="n">find_by_rail_company_name_and_rail_traction_name_and_rail_class_name</span><span class="p">(</span>
                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_company</span><span class="o">].</span><span class="n">name</span><span class="p">,</span>
                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_traction</span><span class="o">].</span><span class="n">name</span><span class="p">,</span>
                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_class</span><span class="o">].</span><span class="n">name</span>
                <span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Rail_company_rail_traction_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Rail_company_rail_traction_calculation">&#182;</a>
        </div>
        <h2>Rail company rail traction calculation</h2>

<p>Returns the <code>rail company rail traction</code>. This is a rail company-specific rail traction type (e.g. Amtrak diesel).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:rail_company_traction</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Rail_company_rail_traction_from_rail_company_and_rail_traction'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Rail_company_rail_traction_from_rail_company_and_rail_traction">&#182;</a>
        </div>
        <h3>Rail company rail traction from rail company and rail traction</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rail company and rail traction&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:rail_company</span><span class="p">,</span> <span class="ss">:rail_traction</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-125'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-125">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-126'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-126">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/rail_company_tractions">rail company rail traction</a> based on the <code>rail company</code> name and <code>rail traction</code> name.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="no">RailCompanyTraction</span><span class="o">.</span><span class="n">find_by_rail_company_name_and_rail_traction_name</span><span class="p">(</span>
                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_company</span><span class="o">].</span><span class="n">name</span><span class="p">,</span>
                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_traction</span><span class="o">].</span><span class="n">name</span>
                <span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Country_rail_traction_rail_class_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Country_rail_traction_rail_class_calculation">&#182;</a>
        </div>
        <h2>Country rail traction rail class calculation</h2>

<p>Returns the <code>country rail traction rail class</code>. This is a country-specific rail traction type and rail class (e.g. US diesel intercity).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:country_rail_traction_class</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Country_rail_traction_rail_class_from_country,_rail_traction,_and_rail_class'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Country_rail_traction_rail_class_from_country,_rail_traction,_and_rail_class">&#182;</a>
        </div>
        <h3>Country rail traction rail class from country, rail traction, and rail class</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country, rail traction, and rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:country</span><span class="p">,</span> <span class="ss">:rail_traction</span><span class="p">,</span> <span class="ss">:rail_class</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-129'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-129">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-130'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-130">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/country_rail_traction_classes">country rail traction rail class</a> based on the <code>country</code> ISO 3166 code, <code>rail traction</code> name, and <code>rail class</code> name.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="no">CountryRailTractionClass</span><span class="o">.</span><span class="n">find_by_country_iso_3166_code_and_rail_traction_name_and_rail_class_name</span><span class="p">(</span>
                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">].</span><span class="n">iso_3166_code</span><span class="p">,</span>
                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_traction</span><span class="o">].</span><span class="n">name</span><span class="p">,</span>
                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_class</span><span class="o">].</span><span class="n">name</span>
                <span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Country_rail_class_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Country_rail_class_calculation">&#182;</a>
        </div>
        <h2>Country rail class calculation</h2>

<p>Returns the <code>country rail class</code>. This is a country-specific rail class (e.g. US intercity).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:country_rail_class</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Country_rail_class_from_country_and_rail_class'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Country_rail_class_from_country_and_rail_class">&#182;</a>
        </div>
        <h3>Country rail class from country and rail class</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country and rail class&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:country</span><span class="p">,</span> <span class="ss">:rail_class</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-133'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-133">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-134'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-134">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/country_rail_classes">country rail class</a> based on the <code>country</code> ISO 3166 code and <code>rail class</code> name.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="no">CountryRailClass</span><span class="o">.</span><span class="n">find_by_country_iso_3166_code_and_rail_class_name</span><span class="p">(</span>
                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">].</span><span class="n">iso_3166_code</span><span class="p">,</span>
                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_class</span><span class="o">].</span><span class="n">name</span>
                <span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Country_rail_traction_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Country_rail_traction_calculation">&#182;</a>
        </div>
        <h2>Country rail traction calculation</h2>

<p>Returns the <code>country rail traction</code>. This is a country-specific rail traction type (e.g. US diesel).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:country_rail_traction</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Country_rail_traction_from_country_and_rail_traction'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Country_rail_traction_from_country_and_rail_traction">&#182;</a>
        </div>
        <h3>Country rail traction from country and rail traction</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from country and rail traction&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:country</span><span class="p">,</span> <span class="ss">:rail_traction</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-137'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-137">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-138'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-138">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/country_rail_tractions">country rail traction</a> based on the <code>country</code> ISO 3166 code and <code>rail traction</code> name.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="no">CountryRailTraction</span><span class="o">.</span><span class="n">find_by_country_iso_3166_code_and_rail_traction_name</span><span class="p">(</span>
                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:country</span><span class="o">].</span><span class="n">iso_3166_code</span><span class="p">,</span>
                  <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_traction</span><span class="o">].</span><span class="n">name</span>
                <span class="p">)</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Rail_class_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Rail_class_calculation">&#182;</a>
        </div>
        <h2>Rail class calculation</h2>

<p>Returns the client-input <a href="http://data.brighterplanet.com/rail_classes">rail class</a>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Rail_traction_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Rail_traction_calculation">&#182;</a>
        </div>
        <h2>Rail traction calculation</h2>

<p>Returns the client-input <a href="http://data.brighterplanet.com/tractions">rail traction</a>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Country_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Country_calculation">&#182;</a>
        </div>
        <h2>Country calculation</h2>

<p>Returns the <code>country</code> in which the trip occurred.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:country</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Country_from_client_input'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Country_from_client_input">&#182;</a>
        </div>
        <h3>Country from client input</h3>

<p><strong>Complies:</strong> All</p>

<p>Uses the client-input <a href="http://data.brighterplanet.com/countries">country</a>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-Country_from_origin_and_destination_locations'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Country_from_origin_and_destination_locations">&#182;</a>
        </div>
        <h3>Country from origin and destination locations</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from origin and destination locations&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:origin_location</span><span class="p">,</span> <span class="ss">:destination_location</span><span class="o">]</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-144'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-144">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-145'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-145">&#182;</a>
        </div>
        <p>Checks whether the <code>origin location</code> and <code>destination location</code> are in the same <a href="http://data.brighterplanet.com/countries">country</a> and if so uses it..</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="k">if</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:origin_location</span><span class="o">].</span><span class="n">country_code</span> <span class="o">==</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:destination_location</span><span class="o">].</span><span class="n">country_code</span>
                  <span class="no">Country</span><span class="o">.</span><span class="n">find_by_iso_3166_code</span><span class="p">(</span><span class="n">characteristics</span><span class="o">[</span><span class="ss">:origin_location</span><span class="o">].</span><span class="n">country_code</span><span class="p">)</span>
                <span class="k">end</span>
            <span class="k">end</span>
            </pre></div>
      </td>
    </tr>
    <tr id='section-Country_from_rail_company'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Country_from_rail_company">&#182;</a>
        </div>
        <h3>Country from rail company</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from rail company&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:rail_company</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-147'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-147">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-148'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-148">&#182;</a>
        </div>
        <p>Looks up the <a href="http://data.brighterplanet.com/countries">country</a> in which the <code>rail company</code> operates.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">characteristics</span><span class="o">[</span><span class="ss">:rail_company</span><span class="o">].</span><span class="n">country</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Rail_company_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Rail_company_calculation">&#182;</a>
        </div>
        <h2>Rail company calculation</h2>

<p>Returns the client-input <a href="http://data.brighterplanet.com/rail_companies">rail company</a>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Destination_location_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Destination_location_calculation">&#182;</a>
        </div>
        <h2>Destination location calculation</h2>

<p>Returns the <code>destination location</code> (<em>lat / lng</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:destination_location</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Destination_location_from_destination'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Destination_location_from_destination">&#182;</a>
        </div>
        <h3>Destination location from destination</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from destination&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:destination</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-152'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-152">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-153'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-153">&#182;</a>
        </div>
        <p>Uses the <a href="http://geokit.rubyforge.org/">Geokit</a> geocoder to determine the destination location (<em>lat / lng</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">location</span> <span class="o">=</span> <span class="o">::</span><span class="no">Geokit</span><span class="o">::</span><span class="no">Geocoders</span><span class="o">::</span><span class="no">MultiGeocoder</span><span class="o">.</span><span class="n">geocode</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:destination</span><span class="o">].</span><span class="n">to_s</span>
                <span class="n">location</span><span class="o">.</span><span class="n">success</span> <span class="p">?</span> <span class="n">location</span> <span class="p">:</span> <span class="kp">nil</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Destination_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Destination_calculation">&#182;</a>
        </div>
        <h2>Destination calculation</h2>

<p>Returns the client-input <code>destination</code>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Origin_location_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Origin_location_calculation">&#182;</a>
        </div>
        <h2>Origin location calculation</h2>

<p>Returns the <code>origin location</code> (<em>lat / lng</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:origin_location</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Origin_location_from_origin'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Origin_location_from_origin">&#182;</a>
        </div>
        <h3>Origin location from origin</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from origin&#39;</span><span class="p">,</span> <span class="ss">:needs</span> <span class="o">=&gt;</span> <span class="ss">:origin</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-157'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-157">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-158'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-158">&#182;</a>
        </div>
        <p>Uses the <a href="http://geokit.rubyforge.org/">Geokit</a> geocoder to determine the origin location (<em>lat / lng</em>).</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">location</span> <span class="o">=</span> <span class="o">::</span><span class="no">Geokit</span><span class="o">::</span><span class="no">Geocoders</span><span class="o">::</span><span class="no">MultiGeocoder</span><span class="o">.</span><span class="n">geocode</span> <span class="n">characteristics</span><span class="o">[</span><span class="ss">:origin</span><span class="o">].</span><span class="n">to_s</span>
                <span class="n">location</span><span class="o">.</span><span class="n">success</span> <span class="p">?</span> <span class="n">location</span> <span class="p">:</span> <span class="kp">nil</span>
            <span class="k">end</span>
          <span class="k">end</span>
          </pre></div>
      </td>
    </tr>
    <tr id='section-Origin_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Origin_calculation">&#182;</a>
        </div>
        <h2>Origin calculation</h2>

<p>Returns the client-input <code>origin</code>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          </pre></div>
      </td>
    </tr>
    <tr id='section-Date_calculation'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Date_calculation">&#182;</a>
        </div>
        <h2>Date calculation</h2>

<p>Returns the <code>date</code> on which the trip occurred.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="n">committee</span> <span class="ss">:date</span> <span class="k">do</span></pre></div>
      </td>
    </tr>
    <tr id='section-Date_from_client_input'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Date_from_client_input">&#182;</a>
        </div>
        <h3>Date from client input</h3>

<p><strong>Complies:</strong> All</p>

<p>Uses the client-input <code>date</code>.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            </pre></div>
      </td>
    </tr>
    <tr id='section-Date_from_timeframe'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-Date_from_timeframe">&#182;</a>
        </div>
        <h3>Date from timeframe</h3>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="n">quorum</span> <span class="s1">&#39;from timeframe&#39;</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-163'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-163">&#182;</a>
        </div>
        <p><strong>Complies:</strong> GHG Protocol Scope 3, ISO 14064-1, Climate Registry Protocol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="ss">:complies</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:ghg_protocol_scope_3</span><span class="p">,</span> <span class="ss">:iso</span><span class="p">,</span> <span class="ss">:tcr</span><span class="o">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">characteristics</span><span class="p">,</span> <span class="n">timeframe</span><span class="o">|</span></pre></div>
      </td>
    </tr>
    <tr id='section-164'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-164">&#182;</a>
        </div>
        <p>Assumes the trip occurred on the first day of the <code>timeframe</code>.</p>

      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="n">timeframe</span><span class="o">.</span><span class="n">from</span>
            <span class="k">end</span>
          <span class="k">end</span>
        <span class="k">end</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
